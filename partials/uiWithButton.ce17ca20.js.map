{"mappings":"iiBAMA,IAAAA,EAAAC,EAAA,S,iEAMMC,EAAiB,IAAIC,EAAAC,GAAJ,CAAmB,aAAc,CACtDC,aAAc,IACdC,aAAc,QAEVC,EAAQC,SAASC,cAAc,sBAC/BC,EAAYF,SAASC,cAAc,kBACnCE,EAAUH,SAASC,cAAc,YACjCG,EAAcJ,SAASC,cAAc,cAE3CG,EAAYC,MAAMC,QAAU,OAC5B,IACIC,E,EADAC,EAAO,EAiBXN,EAAUO,iBAAiB,S,EAASd,EAAAH,EAAA,CAAAG,EAAAe,GAAAC,MAAA,SAAAC,EAAMC,G,IAKhCC,E,8EAHND,EAAEE,iBAfJZ,EAAQa,UAAY,GAiBlBZ,EAAYC,MAAMC,QAAU,OAET,MADbQ,EAAaf,EAAMkB,MAAMC,SAE7BC,EAAAC,OAAOC,KAAK,qDAEK,KAAfP,EAAiB,C,gCACb,EAAAQ,EAAAC,aAAYT,EAAYN,GAAMgB,MAAK,SAAAC,GACP,IAA5BA,EAAOC,KAAKC,KAAKC,OACnBT,EAAAC,OAAOS,QACL,6EAGF,EAAAC,EAAAC,eAAcN,EAAOC,KAAKC,MAAMH,MAAK,WACnCL,EAAAC,OAAOY,QAAQ,oBAA0CC,OAAtBR,EAAOC,KAAKQ,UAAU,aACzD9B,EAAYC,MAAMC,QAAU,QAC5BZ,EAAeyC,S,gEAMvBC,QAAQC,IAAIC,EAAAC,GAAMC,Y,mEAzBoB3B,G,kCA6B1CT,EAAYK,iBAAiB,QAAO,W,MAAEd,EAAAH,EAAA,CAAAG,EAAAe,GAAAC,MAAA,SAAAC,EAAMC,G,IAIlCC,E,8EAFNV,EAAYC,MAAMC,QAAU,QAC5BE,GAAQ,EAEW,MADbM,EAAaf,EAAMkB,MAAMC,QACV,C,gCACb,EAAAI,EAAAC,aAAYT,EAAYN,GAAMgB,MAAK,SAAAC,GACvClB,EAAakC,KAAKC,KAAKjB,EAAOC,KAAKQ,UAAY,KAC/C,EAAAJ,EAAAC,eAAcN,EAAOC,KAAKC,MAAMH,MAAK,WAhD7C,IACUmB,EAgDAxB,EAAAC,OAAOY,QAAQ,oBAA0CC,OAAtBR,EAAOC,KAAKQ,UAAU,aACzDxC,EAAeyC,UAjDfQ,EAAuB3C,SAC5BC,cAAc,YACd2C,kBAAkBC,wBAFbC,OAIRC,OAAOC,SAAS,CACdC,IAAkB,EAAbN,EACLO,SAAU,U,IA+CF1C,IAASD,IACXH,EAAYC,MAAMC,QAAU,OAC5Ba,EAAAC,OAAOC,KACL,6DACA,CAAE8B,QAAS,IAAMC,SAAU,kB,2DAMnChB,QAAQC,IAAIC,EAAAC,GAAMC,Y,yEAxBsB3B,G,gCAAR,G","sources":["src/js/withButton.js"],"sourcesContent":["/* eslint-disable no-unused-expressions */\n/* eslint-disable no-plusplus */\n/* eslint-disable prefer-const */\n/* eslint-disable no-unused-vars */\n/* eslint-disable comma-dangle */\n/* eslint-disable arrow-parens */\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { Notify } from 'notiflix';\nimport { fetchImages } from './fetchImages';\nimport { renderGallery } from './renderGallery';\n\nconst simpleLightBox = new SimpleLightbox('.gallery a', {\n  captionDelay: 150,\n  captionsData: 'alt',\n});\nconst input = document.querySelector('#search-form input');\nconst searchBtn = document.querySelector('#search-button');\nconst gallery = document.querySelector('.gallery');\nconst btnLoadMore = document.querySelector('.load-more');\n\nbtnLoadMore.style.display = 'none';\nlet page = 1;\nlet totalPages;\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nsearchBtn.addEventListener('click', async e => {\n  try {\n    e.preventDefault();\n    clearGallery();\n    btnLoadMore.style.display = 'none';\n    const inputValue = input.value.trim();\n    if (inputValue === '') {\n      Notify.info('This filed cannot be empty. Please enter someting');\n    }\n    if (inputValue !== '') {\n      await fetchImages(inputValue, page).then(images => {\n        if (images.data.hits.length === 0) {\n          Notify.failure(\n            'Sorry, there are no images matching your search query. Please try again.'\n          );\n        } else {\n          renderGallery(images.data.hits).then(() => {\n            Notify.success(`Hooray! We found ${images.data.totalHits} images.`);\n            btnLoadMore.style.display = 'block';\n            simpleLightBox.refresh();\n          });\n        }\n      });\n    }\n  } catch (error) {\n    console.log(error.toString());\n  }\n});\n\nbtnLoadMore.addEventListener('click', async e => {\n  try {\n    btnLoadMore.style.display = 'block';\n    page += 1;\n    const inputValue = input.value.trim();\n    if (inputValue !== '') {\n      await fetchImages(inputValue, page).then(images => {\n        totalPages = Math.ceil(images.data.totalHits / 40);\n        renderGallery(images.data.hits).then(() => {\n          Notify.success(`Hooray! We found ${images.data.totalHits} images.`);\n          simpleLightBox.refresh();\n          smoothScroll();\n        });\n\n        if (page === totalPages) {\n          btnLoadMore.style.display = 'none';\n          Notify.info(\n            \"We're sorry, but you've reached the end of search results.\",\n            { timeout: 8000, position: 'center-bottom' }\n          );\n        }\n      });\n    }\n  } catch (error) {\n    console.log(error.toString());\n  }\n});\n"],"names":["$bpxeT","parcelRequire","$5499c0370533b6c7$var$simpleLightBox","$parcel$interopDefault","$5IjG7","captionDelay","captionsData","$5499c0370533b6c7$var$input","document","querySelector","$5499c0370533b6c7$var$searchBtn","$5499c0370533b6c7$var$gallery","$5499c0370533b6c7$var$btnLoadMore","style","display","$5499c0370533b6c7$var$totalPages","$5499c0370533b6c7$var$page","addEventListener","$2TvXO","mark","_callee","e","inputValue","preventDefault","innerHTML","value","trim","$6JpON","Notify","info","$iwbpK","fetchImages","then","images","data","hits","length","failure","$8Aflw","renderGallery","success","concat","totalHits","refresh","console","log","_ctx","t0","toString","Math","ceil","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","timeout","position"],"version":3,"file":"uiWithButton.ce17ca20.js.map"}