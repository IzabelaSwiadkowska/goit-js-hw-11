{"mappings":"qhBAMA,IAAAA,EAAAC,EAAA,S,uCAMA,MAAMC,EAAiB,IAAIC,EAAAH,GAAJ,CAAmB,cACpCI,EAAQC,SAASC,cAAc,sBAC/BC,EAAYF,SAASC,cAAc,kBACnCE,EAAUH,SAASC,cAAc,YACjCG,EAAcJ,SAASC,cAAc,cAE3C,IACII,EADAC,EAAO,EAOXJ,EAAUK,iBAAiB,SAASC,MAAMC,IACxC,IACEA,EAAEC,iBALJP,EAAQQ,UAAY,GAOlB,MAAMC,EAAab,EAAMc,MAAMC,OACZ,KAAfF,GACFG,EAAAC,OAAOC,KAAK,qDAEK,KAAfL,SACI,EAAAM,EAAAC,aAAYP,EAAYN,GAAMc,MAAKC,IACP,IAA5BA,EAAOC,KAAKC,KAAKC,OACnBT,EAAAC,OAAOS,QACL,6EAGF,EAAAC,EAAAC,eAAcN,EAAOC,KAAKC,MAAMH,MAAK,KACnCL,EAAAC,OAAOY,QAAQ,oBAAoBP,EAAOC,KAAKO,qBAC/ChC,EAAeiC,SAAS,GACxB,G,CAIR,MAAOC,GACPC,QAAQC,IAAIF,EAAMG,W,KAGtBC,OAAO5B,iBAAiB,UAAUC,UAChC,IACE,GACE2B,OAAOC,QAAUD,OAAOE,aACxBrC,SAASsC,gBAAgBC,aACzB,CACAjC,GAAQ,EACR,MAAMM,EAAab,EAAMc,MAAMC,OACZ,KAAfF,SACI,EAAAM,EAAAC,aAAYP,EAAYN,GAAMc,MAAKC,IACvChB,EAAamC,KAAKC,KAAKpB,EAAOC,KAAKO,UAAY,KAC/C,EAAAH,EAAAC,eAAcN,EAAOC,KAAKC,MAAMH,MAAK,KACnCL,EAAAC,OAAOY,QAAQ,oBAAoBP,EAAOC,KAAKO,qBAC/ChC,EAAeiC,SAAS,IAGtBxB,IAASD,IACXD,EAAYsC,MAAMC,QAAU,OAC5B5B,EAAAC,OAAOC,KACL,6DACA,CAAE2B,QAAS,IAAMC,SAAU,kB,KAMrC,MAAOd,GACPC,QAAQC,IAAIF,EAAMG,W","sources":["src/js/withInfiniteScroll.js"],"sourcesContent":["/* eslint-disable function-paren-newline */\n/* eslint-disable implicit-arrow-linebreak */\n/* eslint-disable operator-linebreak */\n/* eslint-disable comma-dangle */\n/* eslint-disable arrow-parens */\n/* eslint-disable no-unused-vars */\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { Notify } from 'notiflix';\nimport { fetchImages } from './fetchImages';\nimport { renderGallery } from './renderGallery';\n\nconst simpleLightBox = new SimpleLightbox('.gallery a');\nconst input = document.querySelector('#search-form input');\nconst searchBtn = document.querySelector('#search-button');\nconst gallery = document.querySelector('.gallery');\nconst btnLoadMore = document.querySelector('.load-more');\n\nlet page = 1;\nlet totalPages;\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\n\nsearchBtn.addEventListener('click', async e => {\n  try {\n    e.preventDefault();\n    clearGallery();\n    const inputValue = input.value.trim();\n    if (inputValue === '') {\n      Notify.info('This filed cannot be empty. Please enter someting');\n    }\n    if (inputValue !== '') {\n      await fetchImages(inputValue, page).then(images => {\n        if (images.data.hits.length === 0) {\n          Notify.failure(\n            'Sorry, there are no images matching your search query. Please try again.'\n          );\n        } else {\n          renderGallery(images.data.hits).then(() => {\n            Notify.success(`Hooray! We found ${images.data.totalHits} images.`);\n            simpleLightBox.refresh();\n          });\n        }\n      });\n    }\n  } catch (error) {\n    console.log(error.toString());\n  }\n});\nwindow.addEventListener('scroll', async () => {\n  try {\n    if (\n      window.scrollY + window.innerHeight >=\n      document.documentElement.scrollHeight\n    ) {\n      page += 1;\n      const inputValue = input.value.trim();\n      if (inputValue !== '') {\n        await fetchImages(inputValue, page).then(images => {\n          totalPages = Math.ceil(images.data.totalHits / 40);\n          renderGallery(images.data.hits).then(() => {\n            Notify.success(`Hooray! We found ${images.data.totalHits} images.`);\n            simpleLightBox.refresh();\n          });\n\n          if (page === totalPages) {\n            btnLoadMore.style.display = 'none';\n            Notify.info(\n              \"We're sorry, but you've reached the end of search results.\",\n              { timeout: 8000, position: 'center-bottom' }\n            );\n          }\n        });\n      }\n    }\n  } catch (error) {\n    console.log(error.toString());\n  }\n});\n"],"names":["$fZKcF","parcelRequire","$8b6170c3a7206720$var$simpleLightBox","$parcel$interopDefault","$8b6170c3a7206720$var$input","document","querySelector","$8b6170c3a7206720$var$searchBtn","$8b6170c3a7206720$var$gallery","$8b6170c3a7206720$var$btnLoadMore","$8b6170c3a7206720$var$totalPages","$8b6170c3a7206720$var$page","addEventListener","async","e","preventDefault","innerHTML","inputValue","value","trim","$7Y9D8","Notify","info","$ak5AJ","fetchImages","then","images","data","hits","length","failure","$aO2mr","renderGallery","success","totalHits","refresh","error","console","log","toString","window","scrollY","innerHeight","documentElement","scrollHeight","Math","ceil","style","display","timeout","position"],"version":3,"file":"uiWithInfiniteScroll.dd9f9a38.js.map"}