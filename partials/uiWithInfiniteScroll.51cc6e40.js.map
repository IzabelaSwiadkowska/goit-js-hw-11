{"mappings":"iiBAMA,IAgBIA,E,EAhBJC,EAAAC,EAAA,S,iEAMMC,EAAiB,IAAIC,EAAAC,GAAJ,CAAmB,aAAc,CACtDC,aAAc,IACdC,aAAc,QAEVC,EAAQC,SAASC,cAAc,sBAC/BC,EAAYF,SAASC,cAAc,kBACnCE,EAAUH,SAASC,cAAc,YACjCG,EAAcJ,SAASC,cAAc,cAEvCI,EAAO,EAOXH,EAAUI,iBAAiB,S,EAASX,EAAAH,EAAA,CAAAG,EAAAY,GAAAC,MAAA,SAAAC,EAAMC,G,IAIhCC,E,8EAFND,EAAEE,iBALJT,EAAQU,UAAY,GAQC,MADbF,EAAaZ,EAAMe,MAAMC,SAE7BC,EAAAC,OAAOC,KAAK,qDAEK,KAAfP,EAAiB,C,gCACb,EAAAQ,EAAAC,aAAYT,EAAYN,GAAMgB,MAAK,SAAAC,GACP,IAA5BA,EAAOC,KAAKC,KAAKC,OACnBT,EAAAC,OAAOS,QACL,6EAGF,EAAAC,EAAAC,eAAcN,EAAOC,KAAKC,MAAMH,MAAK,WACnCL,EAAAC,OAAOY,QAAQ,oBAA0CC,OAAtBR,EAAOC,KAAKQ,UAAU,aACzDrC,EAAesC,S,gEAMvBC,QAAQC,IAAIC,EAAAC,GAAMC,Y,mEAvBoB3B,G,kCA0B1C4B,OAAOhC,iBAAiB,SAAUX,EAAAH,EAAA,CAAAG,EAAAY,GAAAC,MAAA,SAAAC,I,IAOtBE,E,gFAJN2B,OAAOC,QAAUD,OAAOE,aACxBxC,SAASyC,gBAAgBC,cAAY,C,kBAErCrC,GAAQ,EAEW,MADbM,EAAaZ,EAAMe,MAAMC,QACV,C,gCACb,EAAAI,EAAAC,aAAYT,EAAYN,GAAMgB,MAAK,SAAAC,GACvC/B,EAAaoD,KAAKC,KAAKtB,EAAOC,KAAKQ,UAAY,KAC/C,EAAAJ,EAAAC,eAAcN,EAAOC,KAAKC,MAAMH,MAAK,WACnCL,EAAAC,OAAOY,QAAQ,oBAA0CC,OAAtBR,EAAOC,KAAKQ,UAAU,aACzDrC,EAAesC,S,IAGb3B,IAASd,IACXa,EAAYyC,MAAMC,QAAU,OAC5B9B,EAAAC,OAAOC,KACL,6DACA,CAAE6B,QAAS,IAAMC,SAAU,kB,2DAOrCf,QAAQC,IAAIC,EAAAC,GAAMC,Y","sources":["src/js/withInfiniteScroll.js"],"sourcesContent":["/* eslint-disable function-paren-newline */\n/* eslint-disable implicit-arrow-linebreak */\n/* eslint-disable operator-linebreak */\n/* eslint-disable comma-dangle */\n/* eslint-disable arrow-parens */\n/* eslint-disable no-unused-vars */\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { Notify } from 'notiflix';\nimport { fetchImages } from './fetchImages';\nimport { renderGallery } from './renderGallery';\n\nconst simpleLightBox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\nconst input = document.querySelector('#search-form input');\nconst searchBtn = document.querySelector('#search-button');\nconst gallery = document.querySelector('.gallery');\nconst btnLoadMore = document.querySelector('.load-more');\n\nlet page = 1;\nlet totalPages;\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\n\nsearchBtn.addEventListener('click', async e => {\n  try {\n    e.preventDefault();\n    clearGallery();\n    const inputValue = input.value.trim();\n    if (inputValue === '') {\n      Notify.info('This filed cannot be empty. Please enter someting');\n    }\n    if (inputValue !== '') {\n      await fetchImages(inputValue, page).then(images => {\n        if (images.data.hits.length === 0) {\n          Notify.failure(\n            'Sorry, there are no images matching your search query. Please try again.'\n          );\n        } else {\n          renderGallery(images.data.hits).then(() => {\n            Notify.success(`Hooray! We found ${images.data.totalHits} images.`);\n            simpleLightBox.refresh();\n          });\n        }\n      });\n    }\n  } catch (error) {\n    console.log(error.toString());\n  }\n});\nwindow.addEventListener('scroll', async () => {\n  try {\n    if (\n      window.scrollY + window.innerHeight >=\n      document.documentElement.scrollHeight\n    ) {\n      page += 1;\n      const inputValue = input.value.trim();\n      if (inputValue !== '') {\n        await fetchImages(inputValue, page).then(images => {\n          totalPages = Math.ceil(images.data.totalHits / 40);\n          renderGallery(images.data.hits).then(() => {\n            Notify.success(`Hooray! We found ${images.data.totalHits} images.`);\n            simpleLightBox.refresh();\n          });\n\n          if (page === totalPages) {\n            btnLoadMore.style.display = 'none';\n            Notify.info(\n              \"We're sorry, but you've reached the end of search results.\",\n              { timeout: 8000, position: 'center-bottom' }\n            );\n          }\n        });\n      }\n    }\n  } catch (error) {\n    console.log(error.toString());\n  }\n});\n"],"names":["$a9404604f7d6a76b$var$totalPages","$bpxeT","parcelRequire","$a9404604f7d6a76b$var$simpleLightBox","$parcel$interopDefault","$5IjG7","captionDelay","captionsData","$a9404604f7d6a76b$var$input","document","querySelector","$a9404604f7d6a76b$var$searchBtn","$a9404604f7d6a76b$var$gallery","$a9404604f7d6a76b$var$btnLoadMore","$a9404604f7d6a76b$var$page","addEventListener","$2TvXO","mark","_callee","e","inputValue","preventDefault","innerHTML","value","trim","$6JpON","Notify","info","$iwbpK","fetchImages","then","images","data","hits","length","failure","$8Aflw","renderGallery","success","concat","totalHits","refresh","console","log","_ctx","t0","toString","window","scrollY","innerHeight","documentElement","scrollHeight","Math","ceil","style","display","timeout","position"],"version":3,"file":"uiWithInfiniteScroll.51cc6e40.js.map"}