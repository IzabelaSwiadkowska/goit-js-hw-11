{"mappings":"qhBAMA,IAAAA,EAAAC,EAAA,S,uCAMA,MAAMC,EAAiB,IAAIC,EAAAH,GAAJ,CAAmB,aAAc,CACtDI,aAAc,IACdC,aAAc,QAEVC,EAAQC,SAASC,cAAc,sBAC/BC,EAAYF,SAASC,cAAc,kBACnCE,EAAUH,SAASC,cAAc,YACjCG,EAAcJ,SAASC,cAAc,cAE3CG,EAAYC,MAAMC,QAAU,OAC5B,IACIC,EADAC,EAAO,EAiBXN,EAAUO,iBAAiB,SAASC,MAAMC,IACxC,IACEA,EAAEC,iBAfJT,EAAQU,UAAY,GAiBlBT,EAAYC,MAAMC,QAAU,OAC5B,MAAMQ,EAAaf,EAAMgB,MAAMC,OACZ,KAAfF,GACFG,EAAAC,OAAOC,KAAK,qDAEK,KAAfL,SACI,EAAAM,EAAAC,aAAYP,EAAYN,GAAMc,MAAKC,IACP,IAA5BA,EAAOC,KAAKC,KAAKC,OACnBT,EAAAC,OAAOS,QACL,6EAGF,EAAAC,EAAAC,eAAcN,EAAOC,KAAKC,MAAMH,MAAK,KACnCL,EAAAC,OAAOY,QAAQ,oBAAoBP,EAAOC,KAAKO,qBAC/C3B,EAAYC,MAAMC,QAAU,QAC5BX,EAAeqC,SAAS,GACxB,G,CAIR,MAAOC,GACPC,QAAQC,IAAIF,EAAMG,W,KAItBhC,EAAYK,iBAAiB,SAASC,MAAMC,IAC1C,IACEP,EAAYC,MAAMC,QAAU,QAC5BE,GAAQ,EACR,MAAMM,EAAaf,EAAMgB,MAAMC,OACZ,KAAfF,SACI,EAAAM,EAAAC,aAAYP,EAAYN,GAAMc,MAAKC,IACvChB,EAAa8B,KAAKC,KAAKf,EAAOC,KAAKO,UAAY,KAC/C,EAAAH,EAAAC,eAAcN,EAAOC,KAAKC,MAAMH,MAAK,KACnCL,EAAAC,OAAOY,QAAQ,oBAAoBP,EAAOC,KAAKO,qBAC/CpC,EAAeqC,UAlDzB,WACE,MAAQO,OAAQC,GAAexC,SAC5BC,cAAc,YACdwC,kBAAkBC,wBAErBC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EACLM,SAAU,U,CA4CJC,EAAc,IAGZvC,IAASD,IACXH,EAAYC,MAAMC,QAAU,OAC5BW,EAAAC,OAAOC,KACL,6DACA,CAAE6B,QAAS,IAAMC,SAAU,kB,IAKnC,MAAOhB,GACPC,QAAQC,IAAIF,EAAMG,W","sources":["src/js/withButton.js"],"sourcesContent":["/* eslint-disable no-unused-expressions */\n/* eslint-disable no-plusplus */\n/* eslint-disable prefer-const */\n/* eslint-disable no-unused-vars */\n/* eslint-disable comma-dangle */\n/* eslint-disable arrow-parens */\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { Notify } from 'notiflix';\nimport { fetchImages } from './fetchImages';\nimport { renderGallery } from './renderGallery';\n\nconst simpleLightBox = new SimpleLightbox('.gallery a', {\n  captionDelay: 150,\n  captionsData: 'alt',\n});\nconst input = document.querySelector('#search-form input');\nconst searchBtn = document.querySelector('#search-button');\nconst gallery = document.querySelector('.gallery');\nconst btnLoadMore = document.querySelector('.load-more');\n\nbtnLoadMore.style.display = 'none';\nlet page = 1;\nlet totalPages;\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nsearchBtn.addEventListener('click', async e => {\n  try {\n    e.preventDefault();\n    clearGallery();\n    btnLoadMore.style.display = 'none';\n    const inputValue = input.value.trim();\n    if (inputValue === '') {\n      Notify.info('This filed cannot be empty. Please enter someting');\n    }\n    if (inputValue !== '') {\n      await fetchImages(inputValue, page).then(images => {\n        if (images.data.hits.length === 0) {\n          Notify.failure(\n            'Sorry, there are no images matching your search query. Please try again.'\n          );\n        } else {\n          renderGallery(images.data.hits).then(() => {\n            Notify.success(`Hooray! We found ${images.data.totalHits} images.`);\n            btnLoadMore.style.display = 'block';\n            simpleLightBox.refresh();\n          });\n        }\n      });\n    }\n  } catch (error) {\n    console.log(error.toString());\n  }\n});\n\nbtnLoadMore.addEventListener('click', async e => {\n  try {\n    btnLoadMore.style.display = 'block';\n    page += 1;\n    const inputValue = input.value.trim();\n    if (inputValue !== '') {\n      await fetchImages(inputValue, page).then(images => {\n        totalPages = Math.ceil(images.data.totalHits / 40);\n        renderGallery(images.data.hits).then(() => {\n          Notify.success(`Hooray! We found ${images.data.totalHits} images.`);\n          simpleLightBox.refresh();\n          smoothScroll();\n        });\n\n        if (page === totalPages) {\n          btnLoadMore.style.display = 'none';\n          Notify.info(\n            \"We're sorry, but you've reached the end of search results.\",\n            { timeout: 8000, position: 'center-bottom' }\n          );\n        }\n      });\n    }\n  } catch (error) {\n    console.log(error.toString());\n  }\n});\n"],"names":["$fZKcF","parcelRequire","$16fdd32c6f42f9dd$var$simpleLightBox","$parcel$interopDefault","captionDelay","captionsData","$16fdd32c6f42f9dd$var$input","document","querySelector","$16fdd32c6f42f9dd$var$searchBtn","$16fdd32c6f42f9dd$var$gallery","$16fdd32c6f42f9dd$var$btnLoadMore","style","display","$16fdd32c6f42f9dd$var$totalPages","$16fdd32c6f42f9dd$var$page","addEventListener","async","e","preventDefault","innerHTML","inputValue","value","trim","$7Y9D8","Notify","info","$ak5AJ","fetchImages","then","images","data","hits","length","failure","$aO2mr","renderGallery","success","totalHits","refresh","error","console","log","toString","Math","ceil","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$16fdd32c6f42f9dd$var$smoothScroll","timeout","position"],"version":3,"file":"uiWithButton.8848b758.js.map"}